
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>20 PyQGIS速查表 · PYQGIS开发者手册-中文</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="llc">
        
        
    
    <link rel="stylesheet" href="style.css">

    
            
                
                <link rel="stylesheet" href="gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-lightbox/css/lightbox.min.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="20 PyQGIS速查表.html" />
    
    
    <link rel="prev" href="19 QGIS Server Python插件.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    0 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="1 引言.html">
            
                <a href="1 引言.html">
            
                    
                    1 引言
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="1 引言.html">
            
                <a href="1 引言.html#11-在python控制台中编写脚本">
            
                    
                    1.1 在Python控制台中编写脚本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="1 引言.html">
            
                <a href="1 引言.html#12-python插件">
            
                    
                    1.2 Python插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="1 引言.html">
            
                <a href="1 引言.html#13-qgis启动时运行python代码">
            
                    
                    1.3 QGIS启动时运行Python代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="1 引言.html">
            
                <a href="1 引言.html#14-python应用程序">
            
                    
                    1.4 Python应用程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="1 引言.html">
            
                <a href="1 引言.html#15-关于pyqt和sip的技术说明">
            
                    
                    1.5 关于PyQt和SIP的技术说明
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="2 加载项目.html">
            
                <a href="2 加载项目.html">
            
                    
                    2 加载项目
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="2 加载项目.html">
            
                <a href="2 加载项目.html#21-解决错误路径">
            
                    
                    2.1 解决错误路径
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="3 加载图层.html">
            
                <a href="3 加载图层.html">
            
                    
                    3 加载图层
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="3 加载图层.html">
            
                <a href="3 加载图层.html#31-矢量图层">
            
                    
                    3.1 矢量图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="3 加载图层.html">
            
                <a href="3 加载图层.html#32-栅格图层">
            
                    
                    3.2 栅格图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="3 加载图层.html">
            
                <a href="3 加载图层.html#33-qgsproject-实例">
            
                    
                    3.3 QgsProject 实例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="4 访问图层目录树.html">
            
                <a href="4 访问图层目录树.html">
            
                    
                    4 访问图层目录树
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="4 访问图层目录树.html">
            
                <a href="4 访问图层目录树.html#41-qgsproject类">
            
                    
                    4.1 QgsProject类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="4 访问图层目录树.html">
            
                <a href="4 访问图层目录树.html#42-qgslayertreegroup类">
            
                    
                    4.2 QgsLayerTreeGroup类
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="5 使用栅格图层.html">
            
                <a href="5 使用栅格图层.html">
            
                    
                    5 使用栅格图层
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="5 使用栅格图层.html">
            
                <a href="5 使用栅格图层.html#51-图层细节">
            
                    
                    5.1 图层细节
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="5 使用栅格图层.html">
            
                <a href="5 使用栅格图层.html#52-渲染">
            
                    
                    5.2 渲染
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="5 使用栅格图层.html">
            
                <a href="5 使用栅格图层.html#53-查询值">
            
                    
                    5.3 查询值
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html">
            
                    
                    6 使用矢量图层
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#61-检索相关属性信息">
            
                    
                    6.1 检索相关属性信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#62-遍历矢量图层">
            
                    
                    6.2 遍历矢量图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#63-选择要素">
            
                    
                    6.3 选择要素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#64-修改矢量图层">
            
                    
                    6.4 修改矢量图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#65-使用空间索引">
            
                    
                    6.5 使用空间索引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#66-qgsvectorlayerutils类">
            
                    
                    6.6 QgsVectorLayerUtils类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#67-创建矢量图层">
            
                    
                    6.7 创建矢量图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#68-矢量图层的外观（符号系统）">
            
                    
                    6.8 矢量图层的外观（符号系统）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="6 使用矢量图层.html">
            
                <a href="6 使用矢量图层.html#69-更多话题">
            
                    
                    6.9 更多话题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="7 几何处理.html">
            
                <a href="7 几何处理.html">
            
                    
                    7 几何处理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="7 几何处理.html">
            
                <a href="7 几何处理.html#71-几何构造">
            
                    
                    7.1 几何构造
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="7 几何处理.html">
            
                <a href="7 几何处理.html#72-访问几何">
            
                    
                    7.2 访问几何
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="7 几何处理.html">
            
                <a href="7 几何处理.html#73-几何谓词与操作">
            
                    
                    7.3 几何谓词与操作
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="8 投影支持.html">
            
                <a href="8 投影支持.html">
            
                    
                    8 投影支持
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="8 投影支持.html">
            
                <a href="8 投影支持.html#81-坐标参考系统">
            
                    
                    8.1 坐标参考系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="8 投影支持.html">
            
                <a href="8 投影支持.html#82-坐标参考系统转换">
            
                    
                    8.2 坐标参考系统转换
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="9 使用地图画布.html">
            
                <a href="9 使用地图画布.html">
            
                    
                    9 使用地图画布
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="9 使用地图画布.html">
            
                <a href="9 使用地图画布.html#91-嵌入地图画布">
            
                    
                    9.1 嵌入地图画布
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="9 使用地图画布.html">
            
                <a href="9 使用地图画布.html#92-橡皮条和顶点标记">
            
                    
                    9.2 橡皮条和顶点标记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="9 使用地图画布.html">
            
                <a href="9 使用地图画布.html#93-在画布中使用地图工具">
            
                    
                    9.3 在画布中使用地图工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="9 使用地图画布.html">
            
                <a href="9 使用地图画布.html#94-编写自定义地图工具">
            
                    
                    9.4 编写自定义地图工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="9 使用地图画布.html">
            
                <a href="9 使用地图画布.html#95-编写自定义地图画布项">
            
                    
                    9.5 编写自定义地图画布项
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="10 地图渲染和打印.html">
            
                <a href="10 地图渲染和打印.html">
            
                    
                    10 地图渲染和打印
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="10 地图渲染和打印.html">
            
                <a href="10 地图渲染和打印.html#101-简单的渲染">
            
                    
                    10.1 简单的渲染
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="10 地图渲染和打印.html">
            
                <a href="10 地图渲染和打印.html#102-使用不同的crs渲染图层">
            
                    
                    10.2 使用不同的CRS渲染图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="10 地图渲染和打印.html">
            
                <a href="10 地图渲染和打印.html#103-使用打印布局输出">
            
                    
                    10.3 使用打印布局输出
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="11 表达式，过滤和计算值.html">
            
                <a href="11 表达式，过滤和计算值.html">
            
                    
                    11 表达式，过滤和计算值
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="11 表达式，过滤和计算值.html">
            
                <a href="11 表达式，过滤和计算值.html#111-解析表达式">
            
                    
                    11.1 解析表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="11 表达式，过滤和计算值.html">
            
                <a href="11 表达式，过滤和计算值.html#112-评估表达式">
            
                    
                    11.2 评估表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="11 表达式，过滤和计算值.html">
            
                <a href="11 表达式，过滤和计算值.html#113-处理异常错误">
            
                    
                    11.3 处理异常错误
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="12 读取和存储设置.html">
            
                <a href="12 读取和存储设置.html">
            
                    
                    12 读取和存储设置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="13 与用户通信.html">
            
                <a href="13 与用户通信.html">
            
                    
                    13 与用户通信
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="13 与用户通信.html">
            
                <a href="13 与用户通信.html#131-显示消息">
            
                    
                    13.1 显示消息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="13 与用户通信.html">
            
                <a href="13 与用户通信.html#132-显示进度">
            
                    
                    13.2 显示进度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="13 与用户通信.html">
            
                <a href="13 与用户通信.html#133-日志">
            
                    
                    13.3 日志
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="14 认证基础.html">
            
                <a href="14 认证基础.html">
            
                    
                    14 认证基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="14 认证基础.html">
            
                <a href="14 认证基础.html#141-介绍">
            
                    
                    14.1 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="14 认证基础.html">
            
                <a href="14 认证基础.html#142-词汇表">
            
                    
                    14.2 词汇表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="14 认证基础.html">
            
                <a href="14 认证基础.html#143-qgsauthmanager入口">
            
                    
                    14.3 QgsAuthManager入口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" >
            
                <a target="_blank" href="https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/authentication.html#id23">
            
                    
                    14.4 Adapt plugins to use Authentication infrastructure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" >
            
                <a target="_blank" href="https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/authentication.html#id24">
            
                    
                    14.5 Authentication GUIs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="15 任务 - 在后台做繁重的工作.html">
            
                <a href="15 任务 - 在后台做繁重的工作.html">
            
                    
                    15 任务 - 在后台做繁重的工作
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="15 任务 - 在后台做繁重的工作.html">
            
                <a href="15 任务 - 在后台做繁重的工作.html#151-引言">
            
                    
                    15.1 引言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="15 任务 - 在后台做繁重的工作.html">
            
                <a href="15 任务 - 在后台做繁重的工作.html#152-示例">
            
                    
                    15.2 示例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="16 开发Python插件.html">
            
                <a href="16 开发Python插件.html">
            
                    
                    16 开发Python插件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="16 开发Python插件.html">
            
                <a href="16 开发Python插件.html#161-构建python插件">
            
                    
                    16.1 构建Python插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="16 开发Python插件.html">
            
                <a href="16 开发Python插件.html#162-代码片段">
            
                    
                    16.2 代码片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="16 开发Python插件.html">
            
                <a href="16 开发Python插件.html#163-使用插件图层">
            
                    
                    16.3 使用插件图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="16 开发Python插件.html">
            
                <a href="16 开发Python插件.html#164-编码与调试">
            
                    
                    16.4 编码与调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="16 开发Python插件.html">
            
                <a href="16 开发Python插件.html#165-发布你的插件">
            
                    
                    16.5 发布你的插件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="17 编写处理插件.html">
            
                <a href="17 编写处理插件.html">
            
                    
                    17 编写处理插件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="17 编写处理插件.html">
            
                <a href="17 编写处理插件.html#171-从头开始创建">
            
                    
                    17.1 从头开始创建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="17 编写处理插件.html">
            
                <a href="17 编写处理插件.html#172-更新插件">
            
                    
                    17.2 更新插件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="18 网络分析库.html">
            
                <a href="18 网络分析库.html">
            
                    
                    18 网络分析库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="19 QGIS Server Python插件.html">
            
                <a href="19 QGIS Server Python插件.html">
            
                    
                    19 QGIS Server Python插件
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.21" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html">
            
                    
                    20 PyQGIS速查表
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.21.1" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#201-用户接口">
            
                    
                    20.1 用户接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.2" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#202-设置">
            
                    
                    20.2 设置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.3" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#203-工具栏">
            
                    
                    20.3 工具栏
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.4" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#204-菜单">
            
                    
                    20.4 菜单
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.5" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#205-画布">
            
                    
                    20.5 画布
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.6" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#206-图层">
            
                    
                    20.6 图层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.7" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#207-目录">
            
                    
                    20.7 目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.8" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#208-高级目录">
            
                    
                    20.8 高级目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.9" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#209-处理算法">
            
                    
                    20.9 处理算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.10" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#2010-装饰">
            
                    
                    20.10 装饰
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.11" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#2011-创作者">
            
                    
                    20.11 创作者
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.12" data-path="20 PyQGIS速查表.html">
            
                <a href="20 PyQGIS速查表.html#2012-来源">
            
                    
                    20.12 来源
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >20 PyQGIS速查表</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="20-pyqgis&#x901F;&#x67E5;&#x8868;">20 PyQGIS&#x901F;&#x67E5;&#x8868;</h1>
<h2 id="201-&#x7528;&#x6237;&#x63A5;&#x53E3;">20.1 &#x7528;&#x6237;&#x63A5;&#x53E3;</h2>
<p><strong>&#x6539;&#x53D8;&#x5916;&#x89C2;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.PyQt.QtWidgets <span class="hljs-keyword">import</span> QApplication

app = QApplication.instance()
qss_file = open(<span class="hljs-string">r&quot;/path/to/style/file.qss&quot;</span>).read()
app.setStyleSheet(qss_file)
</code></pre>
<p><strong>&#x6539;&#x53D8;&#x56FE;&#x6807;&#x548C;&#x6807;&#x9898;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.PyQt.QtGui <span class="hljs-keyword">import</span> QIcon

icon = QIcon(<span class="hljs-string">r&quot;/path/to/logo/file.png&quot;</span>)
iface.mainWindow().setWindowIcon(icon)
iface.mainWindow().setWindowTitle(<span class="hljs-string">&quot;My QGIS&quot;</span>)
</code></pre>
<h2 id="202-&#x8BBE;&#x7F6E;">20.2 &#x8BBE;&#x7F6E;</h2>
<p><strong>&#x83B7;&#x5F97;&#x8BBE;&#x7F6E;&#x5217;&#x8868;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.PyQt.QtCore <span class="hljs-keyword">import</span> QSettings

qs = QSettings()

<span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> sorted(qs.allKeys()):
    <span class="hljs-keyword">print</span> (k)
</code></pre>
<h2 id="203-&#x5DE5;&#x5177;&#x680F;">20.3 &#x5DE5;&#x5177;&#x680F;</h2>
<p><strong>&#x79FB;&#x9664;&#x5DE5;&#x5177;&#x680F;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.utils <span class="hljs-keyword">import</span> iface

toolbar = iface.helpToolBar()
parent = toolbar.parentWidget()
parent.removeToolBar(toolbar)

<span class="hljs-comment"># and add again</span>
parent.addToolBar(toolbar)
</code></pre>
<p><strong>&#x79FB;&#x9664;&#x52A8;&#x4F5C;</strong></p>
<pre><code class="lang-python">actions = iface.attributesToolBar().actions()
iface.attributesToolBar().clear()
iface.attributesToolBar().addAction(actions[<span class="hljs-number">4</span>])
iface.attributesToolBar().addAction(actions[<span class="hljs-number">3</span>])
</code></pre>
<h2 id="204-&#x83DC;&#x5355;">20.4 &#x83DC;&#x5355;</h2>
<p><strong>&#x79FB;&#x9664;&#x83DC;&#x5355;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.utils <span class="hljs-keyword">import</span> iface

<span class="hljs-comment"># for example Help Menu</span>
menu = iface.helpMenu()
menubar = menu.parentWidget()
menubar.removeAction(menu.menuAction())

<span class="hljs-comment"># and add again</span>
menubar.addAction(menu.menuAction())
</code></pre>
<h2 id="205-&#x753B;&#x5E03;">20.5 &#x753B;&#x5E03;</h2>
<p><strong>&#x8BBF;&#x95EE;&#x753B;&#x5E03;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.utils <span class="hljs-keyword">import</span> iface

canvas = iface.mapCanvas()
</code></pre>
<p><strong>&#x6539;&#x53D8;&#x753B;&#x5E03;&#x989C;&#x8272;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.PyQt.QtCore <span class="hljs-keyword">import</span> Qt

iface.mapCanvas().setCanvasColor(Qt.black)
iface.mapCanvas().refresh()
</code></pre>
<p><strong>&#x753B;&#x5E03;&#x5237;&#x65B0;&#x95F4;&#x9694;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.PyQt.QtCore <span class="hljs-keyword">import</span> QSettings
<span class="hljs-comment"># Set milliseconds (150 milliseconds)</span>
QSettings().setValue(<span class="hljs-string">&quot;/qgis/map_update_interval&quot;</span>, <span class="hljs-number">150</span>)
</code></pre>
<h2 id="206-&#x56FE;&#x5C42;">20.6 &#x56FE;&#x5C42;</h2>
<p><strong>&#x6DFB;&#x52A0;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.utils <span class="hljs-keyword">import</span> iface

layer = iface.addVectorLayer(<span class="hljs-string">&quot;/path/to/shapefile/file.shp&quot;</span>, <span class="hljs-string">&quot;layer name you like&quot;</span>, <span class="hljs-string">&quot;ogr&quot;</span>)
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> layer:
    print(<span class="hljs-string">&quot;Layer failed to load!&quot;</span>)
</code></pre>
<p><strong>&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python">layer = iface.activeLayer()
</code></pre>
<p><strong>&#x83B7;&#x5F97;&#x56FE;&#x5C42;&#x540D;&#x79F0;</strong></p>
<pre><code class="lang-python">layers_names = []
<span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> QgsProject.instance().mapLayers().values():
    layers_names.append(layer.name())

print(<span class="hljs-string">&quot;layers TOC = {}&quot;</span>.format(layers_names))

<span class="hljs-comment"># otherwise</span>
layers_names = [layer.name() <span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> QgsProject.instance().mapLayers().values()]
print(<span class="hljs-string">&quot;layers TOC = {}&quot;</span>.format(layers_names))
</code></pre>
<p><strong>&#x901A;&#x8FC7;&#x540D;&#x79F0;&#x67E5;&#x627E;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsProject

layer = QgsProject.instance().mapLayersByName(<span class="hljs-string">&quot;layer name you like&quot;</span>)[<span class="hljs-number">0</span>]
print(layer.name())
</code></pre>
<p><strong>&#x8BBE;&#x7F6E;&#x5F53;&#x524D;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsProject

layer = QgsProject.instance().mapLayersByName(<span class="hljs-string">&quot;layer name you like&quot;</span>)[<span class="hljs-number">0</span>]
iface.setActiveLayer(layer)
</code></pre>
<p><strong>&#x5237;&#x65B0;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsProject

layer = QgsProject.instance().mapLayersByName(<span class="hljs-string">&quot;layer name you like&quot;</span>)[<span class="hljs-number">0</span>]
<span class="hljs-comment"># Set seconds (5 seconds)</span>
layer.setAutoRefreshInterval(<span class="hljs-number">5000</span>)
<span class="hljs-comment"># Enable auto refresh</span>
layer.setAutoRefreshEnabled(<span class="hljs-keyword">True</span>)
</code></pre>
<p><strong>&#x6DFB;&#x52A0;&#x8868;&#x5355;&#x8981;&#x7D20;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsFeature, QgsGeometry

feat = QgsFeature()
geom = QgsGeometry()
feat.setGeometry(geom)
feat.setFields(layer.fields())

iface.openFeatureForm(layer, feat, <span class="hljs-keyword">False</span>)
</code></pre>
<p><strong>&#x6DFB;&#x52A0;&#x65E0;&#x8868;&#x5355;&#x8981;&#x7D20;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsPointXY

pr = layer.dataProvider()
feat = QgsFeature()
feat.setGeometry(QgsGeometry.fromPointXY(QgsPointXY(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>)))
pr.addFeatures([feat])
</code></pre>
<p><strong>&#x83B7;&#x5F97;&#x8981;&#x7D20;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> layer.getFeatures():
    <span class="hljs-keyword">print</span> (f)
</code></pre>
<p><strong>&#x83B7;&#x5F97;&#x5DF2;&#x9009;&#x8981;&#x7D20;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> layer.selectedFeatures():
    <span class="hljs-keyword">print</span> (f)
</code></pre>
<p><strong>&#x83B7;&#x5F97;&#x8981;&#x7D20;id</strong></p>
<pre><code class="lang-python">selected_ids = layer.selectedFeatureIds()
print(selected_ids)
</code></pre>
<p><strong>&#x4ECE;&#x5DF2;&#x9009;&#x8981;&#x7D20;id&#x521B;&#x5EFA;&#x5185;&#x5B58;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsFeatureRequest

memory_layer = layer.materialize(QgsFeatureRequest().setFilterFids(layer.selectedFeatureIds()))
QgsProject.instance().addMapLayer(memory_layer)
</code></pre>
<p>&#x83B7;&#x5F97;&#x51E0;&#x4F55;</p>
<pre><code class="lang-python"><span class="hljs-comment"># Point layer</span>
<span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> layer.getFeatures():
    geom = f.geometry()
    <span class="hljs-keyword">print</span> (<span class="hljs-string">&apos;%f, %f&apos;</span> % (geom.asPoint().y(), geom.asPoint().x()))
</code></pre>
<p><strong>&#x79FB;&#x52A8;&#x51E0;&#x4F55;</strong></p>
<pre><code class="lang-python">geom.translate(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>)
poly.setGeometry(geom)
</code></pre>
<p><strong>&#x8BBE;&#x7F6E;&#x5750;&#x6807;&#x53C2;&#x8003;&#x7CFB;&#x7EDF;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsProject, QgsCoordinateReferenceSystem

<span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> QgsProject.instance().mapLayers().values():
    layer.setCrs(QgsCoordinateReferenceSystem(<span class="hljs-number">4326</span>, QgsCoordinateReferenceSystem.EpsgCrsId))
</code></pre>
<p><strong>&#x67E5;&#x770B;&#x5750;&#x6807;&#x53C2;&#x8003;&#x7CFB;&#x7EDF;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsProject

<span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> QgsProject.instance().mapLayers().values():
    crs = layer.crs().authid()
    layer.setName(<span class="hljs-string">&apos;{} ({})&apos;</span>.format(layer.name(), crs))
</code></pre>
<p><strong>&#x9690;&#x85CF;&#x5B57;&#x6BB5;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsEditorWidgetSetup

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fieldVisibility</span> <span class="hljs-params">(layer,fname)</span>:</span>
    setup = QgsEditorWidgetSetup(<span class="hljs-string">&apos;Hidden&apos;</span>, {})
    <span class="hljs-keyword">for</span> i, column <span class="hljs-keyword">in</span> enumerate(layer.fields()):
        <span class="hljs-keyword">if</span> column.name()==fname:
            layer.setEditorWidgetSetup(idx, setup)
            <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">continue</span>
</code></pre>
<p><strong>&#x56FE;&#x5C42;&#x6DFB;&#x52A0;WKT&#x8981;&#x7D20;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsVectorLayer, QgsFeature, QgsGeometry, QgsProject

layer = QgsVectorLayer(<span class="hljs-string">&apos;Polygon?crs=epsg:4326&apos;</span>, <span class="hljs-string">&apos;Mississippi&apos;</span>, <span class="hljs-string">&apos;memory&apos;</span>)
pr = layer.dataProvider()
poly = QgsFeature()
geom = QgsGeometry.fromWkt(<span class="hljs-string">&quot;POLYGON ((-88.82 34.99,-88.0934.89,-88.39 30.34,-89.57 30.18,-89.73 31,-91.63 30.99,-90.8732.37,-91.23 33.44,-90.93 34.23,-90.30 34.99,-88.82 34.99))&quot;</span>)
poly.setGeometry(geom)
pr.addFeatures([poly])
layer.updateExtents()
QgsProject.instance().addMapLayers([layer])
</code></pre>
<p><strong>&#x4ECE;GeoPackage&#x52A0;&#x8F7D;&#x6240;&#x6709;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsVectorLayer, QgsProject

fileName = <span class="hljs-string">&quot;/path/to/gpkg/file.gpkg&quot;</span>
layer = QgsVectorLayer(fileName,<span class="hljs-string">&quot;test&quot;</span>,<span class="hljs-string">&quot;ogr&quot;</span>)
subLayers =layer.dataProvider().subLayers()

<span class="hljs-keyword">for</span> subLayer <span class="hljs-keyword">in</span> subLayers:
    name = subLayer.split(<span class="hljs-string">&apos;!!::!!&apos;</span>)[<span class="hljs-number">1</span>]
    uri = <span class="hljs-string">&quot;%s|layername=%s&quot;</span> % (fileName, name,)
    <span class="hljs-comment"># Create layer</span>
    sub_vlayer = QgsVectorLayer(uri, name, <span class="hljs-string">&apos;ogr&apos;</span>)
    <span class="hljs-comment"># Add layer to map</span>
    QgsProject.instance().addMapLayer(sub_vlayer)
</code></pre>
<p><strong>&#x52A0;&#x8F7D;&#x74E6;&#x7247;&#x56FE;&#x5C42;&#xFF08;xyz&#xFF09;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsRasterLayer, QgsProject

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">loadXYZ</span><span class="hljs-params">(url, name)</span>:</span>
    rasterLyr = QgsRasterLayer(<span class="hljs-string">&quot;type=xyz&amp;url=&quot;</span> + url, name, <span class="hljs-string">&quot;wms&quot;</span>)
    QgsProject.instance().addMapLayer(rasterLyr)

urlWithParams = <span class="hljs-string">&apos;type=xyz&amp;url=https://a.tile.openstreetmap.org/%7Bz%7D/%7Bx%7D/%7By%7D.png&amp;zmax=19&amp;zmin=0&amp;crs=EPSG3857&apos;</span>
loadXYZ(urlWithParams, <span class="hljs-string">&apos;OpenStreetMap&apos;</span>)
</code></pre>
<p><strong>&#x79FB;&#x9664;&#x6240;&#x6709;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python">QgsProject.instance().removeAllMapLayers()
</code></pre>
<p><strong>&#x79FB;&#x9664;&#x5168;&#x90E8;</strong></p>
<pre><code class="lang-python">QgsProject.instance().clear()
</code></pre>
<h2 id="207-&#x76EE;&#x5F55;">20.7 &#x76EE;&#x5F55;</h2>
<p><strong>&#x8BBF;&#x95EE;&#x9009;&#x4E2D;&#x7684;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.utils <span class="hljs-keyword">import</span> iface

iface.mapCanvas().layers()
</code></pre>
<p><strong>&#x79FB;&#x9664;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;</strong></p>
<pre><code class="lang-python">ltv = iface.layerTreeView()
mp = ltv.menuProvider()
ltv.setMenuProvider(<span class="hljs-keyword">None</span>)
<span class="hljs-comment"># Restore</span>
ltv.setMenuProvider(mp)
</code></pre>
<h2 id="208-&#x9AD8;&#x7EA7;&#x76EE;&#x5F55;">20.8 &#x9AD8;&#x7EA7;&#x76EE;&#x5F55;</h2>
<p><strong>&#x6839;&#x8282;&#x70B9;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsProject

root = QgsProject.instance().layerTreeRoot()
<span class="hljs-keyword">print</span> (root)
<span class="hljs-keyword">print</span> (root.children())
</code></pre>
<p><strong>&#x8BBF;&#x95EE;&#x7B2C;&#x4E00;&#x4E2A;&#x5B50;&#x8282;&#x70B9;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsLayerTreeGroup, QgsLayerTreeLayer, QgsLayerTree

child0 = root.children()[<span class="hljs-number">0</span>]
<span class="hljs-keyword">print</span> (child0.name())
<span class="hljs-keyword">print</span> (type(child0))
<span class="hljs-keyword">print</span> (isinstance(child0, QgsLayerTreeLayer))
<span class="hljs-keyword">print</span> (isinstance(child0.parent(), QgsLayerTree))
</code></pre>
<p><strong>&#x67E5;&#x627E;&#x56FE;&#x5C42;&#x7EC4;&#x548C;&#x6240;&#x6709;&#x8282;&#x70B9;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsLayerTreeGroup, QgsLayerTreeLayer

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_group_layers</span><span class="hljs-params">(group)</span>:</span>
   print(<span class="hljs-string">&apos;- group: &apos;</span> + group.name())
   <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> group.children():
      <span class="hljs-keyword">if</span> isinstance(child, QgsLayerTreeGroup):
         <span class="hljs-comment"># Recursive call to get nested groups</span>
         get_group_layers(child)
      <span class="hljs-keyword">else</span>:
         print(<span class="hljs-string">&apos;  - layer: &apos;</span> + child.name())


root = QgsProject.instance().layerTreeRoot()
<span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> root.children():
   <span class="hljs-keyword">if</span> isinstance(child, QgsLayerTreeGroup):
      get_group_layers(child)
   <span class="hljs-keyword">elif</span> isinstance(child, QgsLayerTreeLayer):
      <span class="hljs-keyword">print</span> (<span class="hljs-string">&apos;- layer: &apos;</span> + child.name())
</code></pre>
<p><strong>&#x901A;&#x8FC7;&#x540D;&#x79F0;&#x67E5;&#x627E;&#x56FE;&#x5C42;&#x7EC4;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">print</span> (root.findGroup(<span class="hljs-string">&quot;My Group&quot;</span>))
</code></pre>
<p><strong>&#x901A;&#x8FC7;id&#x67E5;&#x627E;&#x56FE;&#x5C42;&#x7EC4;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">print</span> (root.findLayer(layer.layerId()))
</code></pre>
<p><strong>&#x6DFB;&#x52A0;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsVectorLayer, QgsProject

layer1 = QgsVectorLayer(<span class="hljs-string">&quot;Point?crs=EPSG:4326&quot;</span>, <span class="hljs-string">&quot;layer name you like&quot;</span>, <span class="hljs-string">&quot;memory&quot;</span>)
QgsProject.instance().addMapLayer(layer1, <span class="hljs-keyword">False</span>)
node_layer1 = root.addLayer(layer1)
</code></pre>
<p><strong>&#x6DFB;&#x52A0;&#x56FE;&#x5C42;&#x7EC4;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsLayerTreeGroup

node_group2 = QgsLayerTreeGroup(<span class="hljs-string">&quot;Group 2&quot;</span>)
root.addChildNode(node_group2)
</code></pre>
<p><strong>&#x79FB;&#x9664;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python">root.removeLayer(layer1)
</code></pre>
<p><strong>&#x79FB;&#x9664;&#x56FE;&#x5C42;&#x7EC4;</strong></p>
<pre><code class="lang-python">root.removeChildNode(node_group2)
</code></pre>
<p><strong>&#x79FB;&#x52A8;&#x8282;&#x70B9;</strong></p>
<pre><code class="lang-python">cloned_group1 = node_group.clone()
root.insertChildNode(<span class="hljs-number">0</span>, cloned_group1)
root.removeChildNode(node_group)
</code></pre>
<p>&#x91CD;&#x547D;&#x540D;&#x8282;&#x70B9;</p>
<pre><code class="lang-python">cloned_group1.setName(<span class="hljs-string">&quot;Group X&quot;</span>)
node_layer1.setName(<span class="hljs-string">&quot;Layer X&quot;</span>)
</code></pre>
<p><strong>&#x79FB;&#x52A8;&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x5C42;</strong></p>
<pre><code class="lang-python">layer = QgsProject.instance().mapLayersByName(<span class="hljs-string">&quot;layer name you like&quot;</span>)[<span class="hljs-number">0</span>]
root = QgsProject.instance().layerTreeRoot()

mylayer = root.findLayer(layer.id())
myClone = mylayer.clone()
parent = mylayer.parent()

group = root.findGroup(<span class="hljs-string">&quot;My Group&quot;</span>)
<span class="hljs-comment"># Insert in first position</span>
group.insertChildNode(<span class="hljs-number">0</span>, myClone)

parent.removeChildNode(mylayer)
</code></pre>
<p><strong>&#x52A0;&#x8F7D;&#x6307;&#x5B9A;&#x56FE;&#x5C42;&#x7EC4;</strong></p>
<pre><code class="lang-python">QgsProject.instance().addMapLayer(layer, <span class="hljs-keyword">False</span>)

root = QgsProject.instance().layerTreeRoot()
g = root.findGroup(<span class="hljs-string">&quot;My Group&quot;</span>)
g.insertChildNode(<span class="hljs-number">0</span>, QgsLayerTreeLayer(layer))
</code></pre>
<p><strong>&#x6539;&#x53D8;&#x53EF;&#x89C6;&#x6027;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">print</span> (cloned_group1.isVisible())
cloned_group1.setItemVisibilityChecked(<span class="hljs-keyword">False</span>)
node_layer1.setItemVisibilityChecked(<span class="hljs-keyword">False</span>)
</code></pre>
<p><strong>&#x5224;&#x65AD;&#x56FE;&#x5C42;&#x7EC4;&#x662F;&#x5426;&#x9009;&#x4E2D;</strong></p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isMyGroupSelected</span><span class="hljs-params">( groupName )</span>:</span>
    myGroup = QgsProject.instance().layerTreeRoot().findGroup( groupName )
    <span class="hljs-keyword">return</span> myGroup <span class="hljs-keyword">in</span> iface.layerTreeView().selectedNodes()

<span class="hljs-keyword">print</span> (isMyGroupSelected( <span class="hljs-string">&apos;my group name&apos;</span> ))
</code></pre>
<p><strong>&#x5C55;&#x5F00;&#x8282;&#x70B9;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">print</span> (cloned_group1.isExpanded())
cloned_group1.setExpanded(<span class="hljs-keyword">False</span>)
</code></pre>
<p><strong>&#x9690;&#x85CF;&#x8282;&#x70B9;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsProject

model = iface.layerTreeView().layerTreeModel()
ltv = iface.layerTreeView()
root = QgsProject.instance().layerTreeRoot()

layer = QgsProject.instance().mapLayersByName(<span class="hljs-string">&apos;layer name you like&apos;</span>)[<span class="hljs-number">0</span>]
node=root.findLayer( layer.id())

index = model.node2index( node )
ltv.setRowHidden( index.row(), index.parent(), <span class="hljs-keyword">True</span> )
node.setCustomProperty( <span class="hljs-string">&apos;nodeHidden&apos;</span>, <span class="hljs-string">&apos;true&apos;</span>)
ltv.setCurrentIndex(model.node2index(root))
</code></pre>
<p><strong>&#x8282;&#x70B9;&#x4FE1;&#x53F7;</strong></p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">onWillAddChildren</span><span class="hljs-params">(node, indexFrom, indexTo)</span>:</span>
    <span class="hljs-keyword">print</span> (<span class="hljs-string">&quot;WILL ADD&quot;</span>, node, indexFrom, indexTo)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">onAddedChildren</span><span class="hljs-params">(node, indexFrom, indexTo)</span>:</span>
    <span class="hljs-keyword">print</span> (<span class="hljs-string">&quot;ADDED&quot;</span>, node, indexFrom, indexTo)

root.willAddChildren.connect(onWillAddChildren)
root.addedChildren.connect(onAddedChildren)
</code></pre>
<p><strong>&#x521B;&#x5EFA;&#x65B0;&#x76EE;&#x5F55;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsProject, QgsLayerTreeModel
<span class="hljs-keyword">from</span> qgis.gui <span class="hljs-keyword">import</span> QgsLayerTreeView

root = QgsProject.instance().layerTreeRoot()
model = QgsLayerTreeModel(root)
view = QgsLayerTreeView()
view.setModel(model)
view.show()
</code></pre>
<h2 id="209-&#x5904;&#x7406;&#x7B97;&#x6CD5;">20.9 &#x5904;&#x7406;&#x7B97;&#x6CD5;</h2>
<p><strong>&#x83B7;&#x5F97;&#x7B97;&#x6CD5;&#x5217;&#x8868;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsApplication

<span class="hljs-keyword">for</span> alg <span class="hljs-keyword">in</span> QgsApplication.processingRegistry().algorithms():
    print(<span class="hljs-string">&quot;{}:{} --&gt; {}&quot;</span>.format(alg.provider().name(), alg.name(), alg.displayName()))

<span class="hljs-comment"># otherwise</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">alglist</span><span class="hljs-params">()</span>:</span>
    s = <span class="hljs-string">&apos;&apos;</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> QgsApplication.processingRegistry().algorithms():
        l = i.displayName().ljust(<span class="hljs-number">50</span>, <span class="hljs-string">&quot;-&quot;</span>)
        r = i.id()
        s += <span class="hljs-string">&apos;{}---&gt;{}\n&apos;</span>.format(l, r)
    print(s)
</code></pre>
<p><strong>&#x83B7;&#x5F97;&#x7B97;&#x6CD5;&#x5E2E;&#x52A9;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis <span class="hljs-keyword">import</span> processing

processing.algorithmHelp(<span class="hljs-string">&quot;qgis:randomselection&quot;</span>)
</code></pre>
<p><strong>&#x8FD0;&#x884C;&#x7B97;&#x6CD5;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis <span class="hljs-keyword">import</span> processing
result = processing.run(<span class="hljs-string">&quot;native:buffer&quot;</span>, {<span class="hljs-string">&apos;INPUT&apos;</span>: layer, <span class="hljs-string">&apos;OUTPUT&apos;</span>: <span class="hljs-string">&apos;memory:&apos;</span>})
QgsProject.instance().addMapLayer(result[<span class="hljs-string">&apos;OUTPUT&apos;</span>])
</code></pre>
<p><strong>&#x7B97;&#x6CD5;&#x7EDF;&#x8BA1;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsApplication

len(QgsApplication.processingRegistry().algorithms())
</code></pre>
<p><strong>&#x6570;&#x636E;&#x63D0;&#x4F9B;&#x8005;&#x7EDF;&#x8BA1;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsApplication

len(QgsApplication.processingRegistry().providers())
</code></pre>
<p><strong>&#x8868;&#x8FBE;&#x5F0F;&#x7EDF;&#x8BA1;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.core <span class="hljs-keyword">import</span> QgsExpression

len(QgsExpression.Functions())
</code></pre>
<h2 id="2010-&#x88C5;&#x9970;">20.10 &#x88C5;&#x9970;</h2>
<p><strong>&#x7248;&#x6743;</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> qgis.PyQt.Qt <span class="hljs-keyword">import</span> QTextDocument
<span class="hljs-keyword">from</span> qgis.PyQt.QtGui <span class="hljs-keyword">import</span> QFont

mQFont = <span class="hljs-string">&quot;Sans Serif&quot;</span>
mQFontsize = <span class="hljs-number">9</span>
mLabelQString = <span class="hljs-string">&quot;&#xA9; QGIS 2019&quot;</span>
mMarginHorizontal = <span class="hljs-number">0</span>
mMarginVertical = <span class="hljs-number">0</span>
mLabelQColor = <span class="hljs-string">&quot;#FF0000&quot;</span>

INCHES_TO_MM = <span class="hljs-number">0.0393700787402</span> <span class="hljs-comment"># 1 millimeter = 0.0393700787402 inches</span>
case = <span class="hljs-number">2</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_copyright</span><span class="hljs-params">(p, text, xOffset, yOffset)</span>:</span>
    p.translate( xOffset , yOffset  )
    text.drawContents(p)
    p.setWorldTransform( p.worldTransform() )

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_on_render_complete</span><span class="hljs-params">(p)</span>:</span>
    deviceHeight = p.device().height() <span class="hljs-comment"># Get paint device height on which this painter is currently painting</span>
    deviceWidth  = p.device().width() <span class="hljs-comment"># Get paint device width on which this painter is currently painting</span>
    <span class="hljs-comment"># Create new container for structured rich text</span>
    text = QTextDocument()
    font = QFont()
    font.setFamily(mQFont)
    font.setPointSize(int(mQFontsize))
    text.setDefaultFont(font)
    style = <span class="hljs-string">&quot;&lt;style type=\&quot;text/css\&quot;&gt; p {color: &quot;</span> + mLabelQColor + <span class="hljs-string">&quot;}&lt;/style&gt;&quot;</span>
    text.setHtml( style + <span class="hljs-string">&quot;&lt;p&gt;&quot;</span> + mLabelQString + <span class="hljs-string">&quot;&lt;/p&gt;&quot;</span> )
    <span class="hljs-comment"># Text Size</span>
    size = text.size()

    <span class="hljs-comment"># RenderMillimeters</span>
    pixelsInchX  = p.device().logicalDpiX()
    pixelsInchY  = p.device().logicalDpiY()
    xOffset  = pixelsInchX  * INCHES_TO_MM * int(mMarginHorizontal)
    yOffset  = pixelsInchY  * INCHES_TO_MM * int(mMarginVertical)

    <span class="hljs-comment"># Calculate positions</span>
    <span class="hljs-keyword">if</span> case == <span class="hljs-number">0</span>:
        <span class="hljs-comment"># Top Left</span>
        add_copyright(p, text, xOffset, yOffset)

    <span class="hljs-keyword">elif</span> case == <span class="hljs-number">1</span>:
        <span class="hljs-comment"># Bottom Left</span>
        yOffset = deviceHeight - yOffset - size.height()
        add_copyright(p, text, xOffset, yOffset)

    <span class="hljs-keyword">elif</span> case == <span class="hljs-number">2</span>:
        <span class="hljs-comment"># Top Right</span>
        xOffset  = deviceWidth  - xOffset - size.width()
        add_copyright(p, text, xOffset, yOffset)

    <span class="hljs-keyword">elif</span> case == <span class="hljs-number">3</span>:
        <span class="hljs-comment"># Bottom Right</span>
        yOffset  = deviceHeight - yOffset - size.height()
        xOffset  = deviceWidth  - xOffset - size.width()
        add_copyright(p, text, xOffset, yOffset)

    <span class="hljs-keyword">elif</span> case == <span class="hljs-number">4</span>:
        <span class="hljs-comment"># Top Center</span>
        xOffset = deviceWidth / <span class="hljs-number">2</span>
        add_copyright(p, text, xOffset, yOffset)

    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># Bottom Center</span>
        yOffset = deviceHeight - yOffset - size.height()
        xOffset = deviceWidth / <span class="hljs-number">2</span>
        add_copyright(p, text, xOffset, yOffset)

<span class="hljs-comment"># Emitted when the canvas has rendered</span>
iface.mapCanvas().renderComplete.connect(_on_render_complete)
<span class="hljs-comment"># Repaint the canvas map</span>
iface.mapCanvas().refresh()
</code></pre>
<h2 id="2011-&#x521B;&#x4F5C;&#x8005;">20.11 &#x521B;&#x4F5C;&#x8005;</h2>
<p><strong>&#x6309;&#x540D;&#x79F0;&#x83B7;&#x53D6;&#x6253;&#x5370;&#x5E03;&#x5C40;</strong></p>
<pre><code class="lang-python">composerTitle = <span class="hljs-string">&apos;MyComposer&apos;</span> <span class="hljs-comment"># Name of the composer</span>

project = QgsProject.instance()
projectLayoutManager = project.layoutManager()
layout = projectLayoutManager.layoutByName(composerTitle)
</code></pre>
<h2 id="2012-&#x6765;&#x6E90;">20.12 &#x6765;&#x6E90;</h2>
<ul>
<li><a href="https://qgis.org/pyqgis/master/" target="_blank">QGIS Python (PyQGIS) API</a></li>
<li><a href="https://qgis.org/api/" target="_blank">QGIS C++ API</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/qgis" target="_blank">StackOverFlow QGIS questions</a></li>
<li><a href="https://raw.githubusercontent.com/klakar/QGIS_resources/master/collections/Geosupportsystem/python/qgis_basemaps.py" target="_blank">Script by Klas Karlsson</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="19 QGIS Server Python插件.html" class="navigation navigation-prev " aria-label="Previous page: 19 QGIS Server Python插件">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="20 PyQGIS速查表.html#201-用户接口" class="navigation navigation-next " aria-label="Next page: 20.1 用户接口">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"20 PyQGIS速查表","level":"1.21","depth":1,"next":{"title":"20.1 用户接口","level":"1.21.1","depth":2,"anchor":"#201-用户接口","path":"gitbook/20 PyQGIS速查表.md","ref":"gitbook/20 PyQGIS速查表.md#201-用户接口","articles":[]},"previous":{"title":"19 QGIS Server Python插件","level":"1.20","depth":1,"path":"gitbook/19 QGIS Server Python插件.md","ref":"gitbook/19 QGIS Server Python插件.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-pro","-sharing","chapter-fold","github","splitter","code","back-to-top-button","hide-element","donate","auto-scroll-table","lightbox","custom-favicon","pageview-count"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"chapter-fold":{},"github":{"url":"https://github.com/luolingchun/PyQGIS-Developer-Cookbook-cn"},"splitter":{},"search-pro":{},"auto-scroll-table":{},"code":{"copyButtons":true},"donate":{"alipay":"https://raw.githubusercontent.com/luolingchun/luolingchun.github.io/master/gitbook/images/alipay.jpg","alipayText":"支付宝打赏","button":"赏","title":"","wechat":"https://raw.githubusercontent.com/luolingchun/luolingchun.github.io/master/gitbook/images/wechat.jpg","wechatText":"微信打赏"},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"favicon":"./gitbook/images/favicon.ico","lightbox":{"jquery":true,"sameUuid":false},"back-to-top-button":{},"pageview-count":{},"custom-favicon":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"llc","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"PYQGIS开发者手册-中文","language":"zh-hans","gitbook":"*","description":"PYQGIS开发者手册中文翻译"},"file":{"path":"gitbook/20 PyQGIS速查表.md","mtime":"2020-11-14T08:52:38.504Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-03-07T06:47:39.351Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook.js"></script>
    <script src="theme.js"></script>
    
        
        <script src="gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-lightbox/js/lightbox.min.js"></script>
        
    
        
        <script src="gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

